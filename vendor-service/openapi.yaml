openapi: 3.0.3
info:
  title: Vendor Service API
  description: Vendor and storefront management
  version: 1.0.0
servers:
  - url: http://localhost:8081
    description: Local development
tags:
  - name: Vendors
  - name: Documents
  - name: Storefronts

paths:
  /api/v1/vendors:
    get:
      tags: [Vendors]
      summary: List vendors
      operationId: listVendors
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Vendors list
    post:
      tags: [Vendors]
      summary: Create vendor
      operationId: createVendor
      security:
        - bearerAuth: []
      responses:
        '201':
          description: Vendor created

  /api/v1/vendors/{id}:
    get:
      tags: [Vendors]
      summary: Get vendor
      operationId: getVendor
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Vendor details
    put:
      tags: [Vendors]
      summary: Update vendor
      operationId: updateVendor
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Vendor updated
    delete:
      tags: [Vendors]
      summary: Delete vendor
      operationId: deleteVendor
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Vendor deleted

  /api/v1/vendors/bulk:
    post:
      tags: [Vendors]
      summary: Bulk create vendors
      operationId: bulkCreateVendors
      security:
        - bearerAuth: []
      responses:
        '201':
          description: Vendors created

  /api/v1/vendors/{id}/status:
    put:
      tags: [Vendors]
      summary: Update vendor status
      operationId: updateVendorStatus
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Status updated

  /api/v1/vendors/analytics:
    get:
      tags: [Vendors]
      summary: Get vendor analytics
      operationId: getVendorAnalytics
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Analytics data

  /api/v1/vendors/documents/upload:
    post:
      tags: [Documents]
      summary: Upload vendor document
      operationId: uploadVendorDocument
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Document uploaded

  /api/v1/vendors/{id}/documents:
    get:
      tags: [Documents]
      summary: Get vendor documents
      operationId: getVendorDocuments
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Documents list

  /api/v1/vendors/{id}/documents/{bucket}/{path}:
    delete:
      tags: [Documents]
      summary: Delete vendor document
      operationId: deleteVendorDocument
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: bucket
          in: path
          required: true
          schema:
            type: string
        - name: path
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Document deleted

  /api/v1/vendors/{id}/documents/presigned-url:
    post:
      tags: [Documents]
      summary: Generate presigned URL
      operationId: generateVendorDocumentPresignedUrl
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Presigned URL

  /api/v1/vendors/{id}/storefronts:
    get:
      tags: [Storefronts]
      summary: Get vendor storefronts
      operationId: getVendorStorefronts
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Storefronts list

  /api/v1/storefronts:
    get:
      tags: [Storefronts]
      summary: List storefronts
      operationId: listStorefronts
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Storefronts list
    post:
      tags: [Storefronts]
      summary: Create storefront
      operationId: createStorefront
      security:
        - bearerAuth: []
      responses:
        '201':
          description: Storefront created

  /api/v1/storefronts/{id}:
    get:
      tags: [Storefronts]
      summary: Get storefront
      operationId: getStorefront
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Storefront details
    put:
      tags: [Storefronts]
      summary: Update storefront
      operationId: updateStorefront
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Storefront updated
    delete:
      tags: [Storefronts]
      summary: Delete storefront
      operationId: deleteStorefront
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Storefront deleted

  /api/v1/storefronts/resolve/by-slug/{slug}:
    get:
      tags: [Storefronts]
      summary: Resolve storefront by slug
      operationId: resolveBySlug
      parameters:
        - name: slug
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Storefront details

  /api/v1/storefronts/resolve/by-domain/{domain}:
    get:
      tags: [Storefronts]
      summary: Resolve storefront by domain
      operationId: resolveByDomain
      parameters:
        - name: domain
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Storefront details

  /health:
    get:
      summary: Health check
      responses:
        '200':
          description: Healthy

  /ready:
    get:
      summary: Readiness check
      responses:
        '200':
          description: Ready

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
